<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>CodingChallenge</title>
  </head>
  <body>
    <main>
      <label>
        <input type="checkbox" class="checkbox-input" value="First" />1
      </label>
      <label>
        <input type="checkbox" class="checkbox-input" value="Second" />2
      </label>
      <label>
        <input type="checkbox" class="checkbox-input" value="Third" />3
      </label>

      <input
        id="select-all__input"
        type="checkbox"
        class="checkbox-input__select-all"
      />
      <label for="select-all__input" id="select-all__input-label"
        >Alle auswählen</label
      >

      <h1>Deine Auswahl</h1>
      <p id="paragraph__checkbox-output">Keine Auswahl</p>
    </main>
    <script>
  

      const checkboxOutput = document.getElementById(
        "paragraph__checkbox-output"
      );
      const selections = new Map();

     

      const checkboxes = Array.from(
        document.getElementsByClassName("checkbox-input")
      );
      checkboxes.forEach((checkbox) => {
        checkbox.addEventListener("change", toggleSelectionEntry);
      });

      function toggleSelectionEntry(event) {
        const checkValue = event.currentTarget.value;
        selections.has(checkValue)
          ? selections.delete(checkValue)
          : selections.set(checkValue, checkValue);

        printSelectionEntries();
      }

      function printSelectionEntries() {
        const valuesString = Array.from(selections.values()).sort().join(", ");
        checkboxOutput.innerHTML = valuesString? valuesString : "Keine Auswahl";
      }

      function onSelectAll(event) {
        const isSelectAllChecked = event.currentTarget.checked;
        checkboxes.forEach((checkbox) => {
          const isChecked = checkbox.checked;
          if (isSelectAllChecked !== isChecked) checkbox.click();
        });
      }

      const [selectAllCheckbox] = Array.from(
        document.getElementsByClassName("checkbox-input__select-all")
      );
      const selectAllLabel = document.getElementById("select-all__input-label");
      function updateSelectAllText(event) {
        const selectAllLabelText = event.currentTarget.checked
          ? "Alle abwählen"
          : "Alle auswählen";
        selectAllLabel.innerText = selectAllLabelText;
      }

      selectAllCheckbox.addEventListener("change", onSelectAll);
      selectAllCheckbox.addEventListener("change", updateSelectAllText);
    </script>
  </body>
</html>
